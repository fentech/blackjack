(this.webpackJsonp=this.webpackJsonp||[]).push([[0],{166:function(e,t,n){"use strict";var r=n(1),a=n.n(r),o=n(46),c=n(38),i=n(115),u=n(95),s={2:2,3:3,4:4,5:5,6:6,7:7,8:8,9:9,10:10,jack:10,queen:10,king:10,ace:11},l=["diamonds","hearts","spades","clubs"],d=function(){return Object.keys(s).map((function(e){return l.map((function(t){return{suit:t,rank:e}}))})).flat()},f=function(e){return e>21},m=function(e){var t=e.player,n=e.dealer,r=e.turn,a=t.score,o=n.score;return f(a)||!r&&!f(o)&&a<=21&&o<=21&&a<o},p=function(e){var t=e.player,n=e.dealer,r=e.turn,a=t.score,o=n.score;return!f(a)&&"player"!==r&&(f(o)||!r&&a<=21&&o<=21&&a>o)||"player"===r&&2===t.cards.length&&21===a},g=function(e){return!e.turn||m(e)||p(e)},v=function(e){for(var t=0;t<e.length;t++){var n=Math.floor(Math.random()*(t+1)),r=e[t];e[t]=e[n],e[n]=r}return e},b=function(e){if(0===e.length)return 0;for(var t=0,n=e.reduce((function(e,n){return"ace"===n.rank&&t++,e+s[n.rank]}),0);n>21&&t>0;)n-=10,t--;return n},h=function(e){e.deck=v(d())},x=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:0;return{bet:e,chips:100,deck:v(d()),dealer:{cards:[],score:0},gameOver:!1,isBetting:!0,isNewGame:!0,player:{cards:[],score:0},turn:"player"}},y=x(),E=Object(u.b)({name:"gameControls",initialState:y,reducers:{hit:function(e,t){e.deck.length||h(e);var n=e.deck.shift();e[t.payload].cards.push(n),e[t.payload].score=b(e[t.payload].cards),g(e)&&(e.gameOver=!0)},initNewRound:function(e){p(e)?e.chips+=e.bet:m(e)&&(e.chips-=e.bet),e.isBetting=!0,e.bet=0,e.gameOver=!1},resetDeck:function(e){h(e)},resetGame:function(){return x()},setTurn:function(e,t){e.turn=t.payload,null===t.payload&&(e.gameOver=!0)},stand:function(e){e.turn="dealer"},startNewRound:function(e,t){var n=t.payload;e.isBetting=!1,e.isNewGame&&(e.isNewGame=!1),e.bet=n,e.turn="player",e.dealer={cards:[],score:0},e.player={cards:[],score:0};for(var r=0;r<4;r++){var a=(e.deck.length||h(e),e.deck.shift());(r+1)%2===0?e.dealer.cards.push(a):e.player.cards.push(a)}e.dealer.score+=b(e.dealer.cards),e.player.score+=b(e.player.cards),g(e)&&(e.gameOver=!0)},toggleBetting:function(e){e.isBetting=!e.isBetting}}}),k=E.actions,B=k.hit,I=k.initNewRound,O=(k.resetDeck,k.resetGame),w=k.setTurn,D=(k.stand,k.startNewRound),S=(k.toggleBetting,E.name,E.reducer),j=n(25),T=n.n(j),C=n(31),P=n(88),N=n(54),G=n(26);function z(){var e=T()(["\n  font-size: 22px;\n  font-weight: bold;\n"]);return z=function(){return e},e}function H(){var e=T()(["\n  padding: 20px;\n  background-color: ",";\n  align-items: center;\n  justify-content: flex-start;\n  margin-bottom: 20px;\n  border-radius: 4px;\n"]);return H=function(){return e},e}var A="android"===C.a.OS?N.a:P.a,F=Object(G.a)(A)(H(),(function(e){return e.disabled?"#ddd":"#e89"})),R=G.a.Text(z()),M=n(116),V=n.n(M);function W(){var e=T()(["\n  margin-bottom: 10px;\n"]);return W=function(){return e},e}function q(){var e=T()(["\n  margin-bottom: 10px;\n  text-align: center;\n"]);return q=function(){return e},e}function J(){var e=T()(["\n  padding: 40px 0;\n"]);return J=function(){return e},e}var L=Object(G.a)(c.Layout)(J()),U=Object(G.a)(c.Text)(q()),Y=Object(G.a)(c.Input)(W()),K=o.c,Q=function(e){var t=e.onSubmit,n=a.a.useState(),r=V()(n,2),o=r[0],i=r[1],u=a.a.useState(null),s=V()(u,2),l=s[0],d=s[1],f=K((function(e){return e.game})).chips;return a.a.createElement(L,{testID:"BetForm"},a.a.createElement(U,{category:"h3"},"Place your bet"),a.a.createElement(Y,{value:o||0===o?o.toString():"",onChangeText:function(e){var t=parseInt(e);t||0===t?(i(t),d(t<=0?"Bet must be more than 0.":t>f?"Bet must be less than or equal to your total chips.":null)):(d("Must be a valid number."),i(e))},status:l?"danger":"primary",caption:l||"",testID:"BetFormInput"}),a.a.createElement(c.Button,{disabled:!o||!!l,size:"large",onPress:function(){"number"===typeof o&&t(o)},testID:"BetFormButton"},"Bet"))},X=n(3),Z=function(e){var t=e.gameOver,n=K((function(e){return e.game})).isBetting,r=Object(o.b)();return n?a.a.createElement(X.a,{testID:"GameControls"},a.a.createElement(Q,{onSubmit:function(e){r(D(e))}})):t?a.a.createElement(X.a,{testID:"GameControls"},a.a.createElement(F,{testID:"PlayAgainButton",onPress:function(){r(I())}},a.a.createElement(R,null,"Play Again"))):a.a.createElement(X.a,{testID:"GameControls"},a.a.createElement(F,{testID:"HitButton",onPress:function(){r(B("player"))}},a.a.createElement(R,null,"Hit")),a.a.createElement(F,{testID:"StandButton",onPress:function(){r(w("dealer"))}},a.a.createElement(R,null,"Stand")))},$=n(33),_=n.n($);function ee(){var e=T()(["\n  font-size: 18px;\n"]);return ee=function(){return e},e}var te=G.a.Text(ee()),ne=function(e){var t=e.suit,n=e.rank;return a.a.createElement(te,null,n," of ",t)};function re(){var e=T()(["\n  font-size: 24px;\n  font-weight: bold;\n  margin-bottom: 8px;\n"]);return re=function(){return e},e}function ae(){var e=T()(["\n  margin-bottom: 30px;\n"]);return ae=function(){return e},e}var oe=G.a.View(ae()),ce=G.a.Text(re()),ie=function(e){var t=e.hideCard,n=e.person,r=e.personState,o=e.testID,c=void 0===o?"Hand":o;return a.a.createElement(oe,{testID:c},a.a.createElement(ce,{testID:"HandName"},n[0].toUpperCase()+n.slice(1)," -"," ",r.cards.length&&("dealer"==n&&t?function(e){var t=e.score,n=e.cards,r=t;return n.slice(1).map((function(e){r-=s[e.rank]})),r}(r):r.score)),a.a.createElement(X.a,null,"dealer"==n&&t?a.a.createElement(ne,r.cards[0]):r.cards.map((function(e,t){return a.a.createElement(ne,_()({key:t},e))}))))};function ue(){var e=T()(["\n  margin: 20px 0;\n"]);return ue=function(){return e},e}function se(){var e=T()(["\n  font-size: 40px;\n  text-align: center;\n  font-weight: bold;\n  margin-bottom: 20px;\n"]);return se=function(){return e},e}function le(){var e=T()(["\n  font-size: 28px;\n  text-align: center;\n  margin-bottom: 30px;\n  font-weight: 300;\n  letter-spacing: 1px;\n"]);return le=function(){return e},e}function de(){var e=T()(["\n  ",";\n  ","\n"]);return de=function(){return e},e}var fe=C.a.OS,me=G.a.SafeAreaView(de(),"ios"===fe?"margin: 0 20px;":"padding: 0 4%;","android"===fe?"margin-top: 40px;":"margin-top: 10px;"),pe=G.a.Text(le()),ge=G.a.Text(se()),ve=G.a.View(ue());function be(){var e,t=Object(o.b)(),n=K((function(e){return e.game})),r=n.player,i=n.dealer,u=n.turn,s=n.bet,l=n.chips,d=n.isBetting,f=n.gameOver;return a.a.useEffect((function(){"dealer"===u&&(i.score<17?setTimeout((function(){return t(B("dealer"))}),1e3):t(w(null)))}),[i,u]),a.a.useEffect((function(){l||t(O())}),[l]),a.a.createElement(me,null,a.a.createElement(ge,null,"Blackjack"),f?a.a.createElement(pe,{testID:"Status"},p(e=n)?"YOU WIN!!":m(e)?"You lost...":"Pushed"):null,!d&&a.a.createElement(c.Text,{testID:"CurrentBet",category:"h4"},"Current bet: ",s.toString()),a.a.createElement(c.Text,{category:"h5"},"Total chips: ",l.toString()),!d&&a.a.createElement(ve,{testID:"Cards"},a.a.createElement(ie,{hideCard:"player"===u,person:"dealer",personState:i,testID:"DealerHand"}),a.a.createElement(ie,{person:"player",personState:r,testID:"PlayerHand"})),a.a.createElement(Z,{gameOver:f}))}var he=n(37),xe=Object(he.c)({game:S}),ye=Object(u.a)({reducer:xe});function Ee(){return a.a.createElement(c.ApplicationProvider,{mapping:i.mapping,theme:i.light},a.a.createElement(o.a,{store:ye},a.a.createElement(be,null)))}n.d(t,"a",(function(){return Ee}))},167:function(e,t,n){n(168),e.exports=n(287)},168:function(e,t){"serviceWorker"in navigator&&window.addEventListener("load",(function(){navigator.serviceWorker.register("/blackjack/expo-service-worker.js",{scope:"/blackjack/"}).then((function(e){})).catch((function(e){console.info("Failed to register service-worker",e)}))}))}},[[167,1,2]]]);
//# sourceMappingURL=app.72d42f1f.chunk.js.map